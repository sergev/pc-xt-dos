(* !LIBRARY! *) DEFINITION MODULE CardStr;

(* Proposed BSI/ISO Standard Modula-2 I/O Library
 * Copyright Roger Henry, University of Nottingham
 * Version WG/4.01, February 1989
 * Permission is given to copy this Definition Module, with the
 * copyright notice intact, for the purposes of evaluation and test.
 * At the stage of a formal draft standard, Copyright will be transferred
 * to BSI (and through BSI to other recognised standards bodies).
 * Status: for review by BSI/IST/5/13;
           for review by ISO/IEC JTC1/SC22/WG13
 --* this version editted to comform to D105 kjg September 1989 *--
*)

IMPORT ConvTypes;
FROM   ConvTypes IMPORT ScanProgress, ScanProc;

(* the text form of an unsigned whole number is                  *)
(*          [whitespace] digit {digit}                           *)

PROCEDURE Scan(
      this: CHAR; VAR progress: ScanProgress; VAR nextScanner: ScanProc
);

TYPE
  ConvResults = ConvTypes.ConvResults;

PROCEDURE Format(str: ARRAY OF CHAR): ConvResults;
  (* pre:  "str" has a string value                              *)
  (* post: returned value corresponds to format of string        *)
  (*       value with respect to the type CARDINAL               *)

PROCEDURE Value(str: ARRAY OF CHAR): CARDINAL;
  (* pre:  "str" has a string value                              *)
  (*       and format is "allRight" with respect to CARDINAL     *)
  (* post: returned value is the corresponding CARDINAL          *)

PROCEDURE Take(
  str: ARRAY OF CHAR; VAR card: CARDINAL; VAR format: ConvResults
);
  (* pre:  "str" has a string value                              *)
  (* post: either value of "format" is "allRight",               *)
  (*         value of "card" is the corresponding CARDINAL       *)
  (*       or value of "format" is "outOfRange",                 *)
  (*         value of "card" is MAX(CARDINAL)                    *)
  (*       or value of "format" is "wrongFormat"                 *)
  (*         value of "card" is undefined                        *)
  (*       or value of format is "noData"                        *)
  (*         value of "card" is unchanged                        *)

TYPE
  Alignment = ConvTypes.Alignment;

PROCEDURE Length(card: CARDINAL): CARDINAL;

PROCEDURE Give(
  VAR str: ARRAY OF CHAR; card: CARDINAL; width: CARDINAL; where: Alignment);
  (* post: as far as capacity of "str" allows,                             *)
  (*       the character representation of "card" is contained in "str"    *)
  (*       in a field of at least "width" characters                       *)
  (*	   left, centre (numeric), or right justified;                     *)
  (*       for the special case of "width" = 0, a leading space is written *)

END CardStr.
